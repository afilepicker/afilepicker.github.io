<script wis-load=selected>wis.app.register.controller("SelectedCtrl",["$http","$cacheFactory","$routeParams","$location","$route",function(e,t,i){function r(e,t){var i=t.length,r=t.split("/"),n=r.length;return e.filter(function(e){var r=e.relativePath.split("/").length,a=r-1==n&&"."==e.name||r==n&&"."!=e.name;return a&&e.relativePath.substr(0,i)===t})}{var n,a=this;i.service}a.getName=function(e){var t;return a.isDir(e)?(t=e.relativePath.split("/"))&&t.pop()&&t.pop():e.name},a.isDir=function(e){return"."==e.name&&"inode/directory"==e.type},a.open=function(e){a.isDir(e)&&(a.files=r(n.files,e.relativePath.replace(/\.$/,""),"my-device"))},a.getIcon=function(e){return a.isDir(e)?"glyphicon-folder-open":"glyphicon-file"},a.path="/",a.getSize=function(e){if(e.size)return e.size;var t=e.relativePath.replace(/\.$/,"");return n.files.reduce(function(e,i){return e+(i.relativePath.startsWith(t)?i.size:0)},0)},a.init=function(e){n=e,a.files=r(n.files,"/","my-device")}}]);</script><table class="table table-striped" ng-controller="SelectedCtrl as Selected" ng-init=Selected.init(FileList)><thead><tr><th>{{::$locale.FILE.name}}<th>{{::$locale.FILE.lastMod}}<th>{{::$locale.FILE.size}}<th>{{::$locale.FILE.type}}<tbody><tr ng-repeat="file in Selected.files track by file.id" ng-click=Selected.open(file)><td><i class=glyphicon ng-class=::Selected.getIcon(file)></i> {{::Selected.getName(file)}}<td>{{::file.lastModifiedDate | date:'medium'}}<td>{{::Selected.getSize(file) | filesize}}<td>{{::file.type}}</table>