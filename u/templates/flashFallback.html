<script wis-load=flash-picker>wis.app.register.directive({wisFlashPicker:["file","$rootScope",function(e,t){var a=function(){for(var e=3,t=document.createElement("b"),a=t.all||[];t.innerHTML="<!--[if gt IE "+ ++e+"]><i><![endif]-->",a[0];);return e>4?e:document.documentMode}(),i=0,s='"/u/bin/flash/moxie.swf" ',n='<object id="flash" name="simplemovie" class="ng-hide" tycpe="application/x-shockwave-flash" data='+s+(a?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ':"")+'><param name="movie" value='+s+'><param name="flashvars" value="uid=flash&amp;target=wis.flashCallbacks"><param name="wmode" value="transparent"><param name="allowscriptaccess" value="always"></object>',l=angular.element(n),o=l[0];return angular.element(document.body).append(l),{restrict:"A",replace:!0,link:function(a,s){function n(e){var t="cb_"+i++;return p[t]=e,t}function c(e){this.item=e}var r=s[0].getBoundingClientRect();l.css({top:r.top+"px",left:r.left+"px",width:r.width+"px",height:r.height+"px",position:"absolute"}).removeClass("ng-hide");var d=[],p={};c.prototype.LoadStart=function(){this.item.addedFile.source={$base64:""},this.item.addedFile.loaded=0},Load.prototype.LoadStart=function(){o.exec(this.item.uid,"Blob","destroy",[]),setTimeout(function(){t.$apply()})},Progress.prototype.LoadStart=function(e,t){this.item.addedFile.source.$base64+=t},wis.flashCallbacks=function(a){var i=a.type||a;if(/^cb_/.test(i))return i=i.split("::"),p[i[0]][i[1]].apply(this,arguments);switch(i){case"flash::Change":var s=o.exec("flash","FileInput","getFiles");angular.forEach(s,function(t){t.addedFile=e.add("my-device","blob","",t.lastModifiedDate,t.name,t.size,t.type),o.exec(n(new c(t)),"FileReader","readAsBase64",[t.uid]),d.push(t)});break;case"flash::Init":o.exec("flash","FileInput","init",[{name:"x",accept:[{title:"All Files",extensions:"*"}],multiple:!0}])}setTimeout(function(){t.$apply()})},a.$on("$destroy",function(){l.css({top:"-8px",left:"-8px",width:"9px",height:"9px"})})}}}]});</script><b wis-flash-picker></b>